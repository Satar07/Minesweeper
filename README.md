# 扫雷

> code by Satar07



## 实现功能

- 显示9 * 9棋盘
- 如有旧游戏 提示是否从之前开始玩
- 显示必要操作说明
    + quit为退出程序
    + table为查看高分榜
        + 实时存档高分榜
    + choose为选择难度
    + 实时保存游戏局面
    + 两个数字为要点开的坐标
- 显示计时器
- 点开之后是雷就要提示你死了
- 点完全部含剩下雷的数量就提示那你赢了
    - 要求留下名字



## 框架

### main

> 控制游玩进程

创建计时器

显示... ...

实时对用户输入反应

根据游戏状态反应

- 赢了
    - 显示时间
    - 留下名字
    - 记录
    - r 重玩 q退出
- 输了
    - r重玩 q退出



### gamer

> 游戏引擎

游戏棋盘的创建 大小 是否有旧游戏

显示棋盘

布置地雷

产生提示

保存游戏进程 有哪个被翻开了

广播游戏状态 继续游戏 赢了 输了



第一次翻开的不能是地雷



### timer

> 记录时间

开始计时

结束计时

输出结果

恢复计时器



## 问题

1. 刷新时采用整个棋盘刷新 速度慢 

   单独2个字符刷新会使前面的字符卡掉

   可以解决 ？把前面的字符也一起刷新了

   ----- 但是在i7-10700上顺滑无比 （果然是性能测试软件）
   
   **解决方案** 用 `printf()` 和 `putchar()` 加速  确实可以加速到只有高级难度才会有细微的刷新感觉
   
   v1.0还是没有实现单独刷新


## 下一步

- 添加游戏内重玩功能 输了也会停留在游戏界面 //推后实现 属于逻辑链改善
- 限制排行榜输入名字的长度 限制雷数输入一些奇怪的东西



## 版本

- **v1.0** 2022.1.18
    - 构建了游戏主体
        - 左键点开格子
        - 右键标记
        - 左键双击快速打开
        - 返回菜单
        - 退出游戏
        - 计时器 -多线程实现
    - 菜单内容
        - 新游戏
        - 排行榜
        - 难度选择
        - 退出

- **v1.1**
  - 游戏主题添加功能
    - 显示剩余雷数 （=实际雷数-标记的格子数）
    - 游戏时的菜单居中优化
  - 其他功能
    - 游戏状态二进制保存 防止改动和查看
    - 添加自定义雷数功能 自适应窗口大小